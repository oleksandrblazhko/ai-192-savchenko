### Варіант 20: Implementation - Secure Deployment

# Secure Deployment (Безпечне розгортання)

## Огляд практики безпеки

Одним із завершальних етапів доставки безпечного програмного продукту є забезпечення того, що безпека і цілісність розробленої програми не порушується під час розгортання. На цьому фокусується практика безпечного розгортання. Перший потік практики зосереджений на усуненні ручних помилок шляхом автоматизації якомога більшої частини процесу розгортання та досягнення успіху в залежності від результатів комплексної перевірки безпеки. Він також сприяє розподілу обов'язків, створюючи належним чином підготовлених нерозробників, відповідальних за розгортання.

Другий потік виходить за рамки механізму розгортання та фокусується на захисті конфіденційності та цілісності приватних даних, таких як паролі, токени та інші секретні змінні, необхідні для роботи програм у виробницьких середовищах. У найпростішому вигляді відповідні виробничі секрети переміщуються зі сховищ і конфігураційних файлів у належним чином керовані цифрові склепіння. У більш просунутих формах секрети генеруються динамічно під час розгортання та рутинні процеси виявляють і змінюють наявність будь-яких незахищених секретів в навколишньому середовищі.


## Огляд потоків

### Потік A – Процес розгортання
Повторюваний і послідовний процес розгортання гарантує, що ви розгортаєте лише правильні артефакти програмного забезпечення для розробки. Він також прокладає шлях для репрезентативних тестових середовищ перед виробництвом.

### Потік Б - Управління секретними змінними
Оскільки для безпечного виконання будь-якої програмної системи потрібні облікові дані, цей потік забезпечує належну обробку цих конфіденційних елементів даних у середовищі організації.


## Потік A – Процес розгортання

### Рівень зрілості 1

### Вигода
Обмежений ризик людської помилки під час процесу розгортання, мінімізація проблем з безпеки

### Діяльність
Визначте процес розгортання на всіх етапах, розділивши його на набір чітких інструкцій, які повинні виконуватися людиною або автоматизованим інструментом. Визначення процесу розгортання має описувати весь процес від початку до
кіння, щоб його можна було послідовно виконувати кожного разу та отримувати один й той самий результат. Визначення зберігається централізовано та доступне для всього відповідного персоналу. Не зберігайте та не поширюйте копії, бо деякі з них можуть бути застарілими.

Розгортайте додатки у виробництві за допомогою автоматизованого процесу або вручну персоналом, окрім розробників. Переконайтеся, що розробники не потребують прямого доступу до виробничого середовища для розгортання.

Перегляньте всі інструменти розгортання, переконавшись, що вони активно обслуговуються постачальником і оновлені до останніх версій оновлень безпеки. Зміцніть конфігурацію кожного інструменту таким чином, щоб він узгоджувався з інструкціями постачальника та найкращими практиками. Через те, що більшість цих інструментів потребують доступу до виробничого середовища, їхня безпека надзвичайно важлива. Переконайтеся в цілісності самих інструментів і
робочих процесів, яких вони дотримуються, і відповідно до них налаштовуйте правила доступу до цих інструментів
до принципу найменших привілеїв.

Нехай персонал, який має доступ до виробничого середовища, проходить принаймні мінімальний рівень підготовки або сертифікації для забезпечення їх компетентності в цій роботі.

### Критерії якості
- У вас достатньо інформації для запуску процесів розгортання
- Ваша документація щодо розгортання актуальна
- Ваша документація щодо розгортання доступна відповідним зацікавленим сторонам
- Ви гарантуєте, що лише визначений кваліфікований персонал може ініціювати розгортання
- Ви посилюєте інструменти, які використовуються в процесі розгортання


### Рівень зрілості 2

### Вигода
Ефективний процес розгортання з інтегрованими засобами безпеки

### Діяльність
Автоматизуйте процес розгортання, щоб охопити різні етапи, щоб не було необхідності конфігурувати вручну та ризик людських помилок було ліквідовано. Переконайтеся, що розгортання узгоджено на всіх етапах.

Інтегруйте автоматичні перевірки безпеки в процес розгортання, наприклад використовуючи тестування безпеки динамічного аналізу і інструменти сканування вразливостей. Крім того, перевірте цілісність розгорнутих артефактів, де це має сенс. Отримайте результати цих тестів централізовано і вживіть всі необхідні заходи. Переконайтеся в тому, що у разі виявлення будь-яких дефектів відповідний персонал повідомляється автоматично. Якщо виявлено будь-які проблеми, що перевищують попередньо визначену критичність, зупиніть або скасуйте
розгортання або автоматично, або запровадьте окреме ручне погодження так, щоб це рішення було зафіксоване та містило пояснення щодо винятку.

Ведіть облік усіх розгортань на всіх етапах. Майте систему, щоб записувати кожне розгортання, включаючи інформацію про те, хто його проводив, версію програмного забезпечення, яка була розгорнута, і будь-які відповідні змінні, характерні для розгортання.

### Критерії якості
- Процеси розгортання автоматизовані на всіх етапах
- Розгортання включає автоматизовані процедури тестування безпеки
- Ви попереджаєте відповідальний персонал про виявлені вразливих місць
- У вас є доступні журнали для ваших попередніх розгортань за певний період часу

### Рівень зрілості 3

### Вигода
Гарантована цілісність артефактів, які розгортаються

### Діяльність
Скористайтеся бінарними файлами, що підписуються під час збирання та включайте автоматичну перевірку цілісності програмного забезпечення, що розгортається шляхом перевірки їхніх підписів проти довірених сертифікатів. Це може включати двійкові файли розроблені та створені власними силами, а також артефакти сторонніх розробників. Не розгортайте артефакти, якщо їхні підписи неможливо перевірити, включно з недійсними або простроченими сертифікатами.

Якщо в списку довірених сертифікатів є сторонні розробники, перевіряйте їх періодично та підтримуйти їх у відповідності до керівництва організації оточення перевірених сторонніх постачальників.

Вручну підтвердьте розгортання принаймні один раз під час автоматизованого розгортання. Якщо людська перевірка значно точніша, ніж перевірка автоматизовано під час процесу розгортання, виберіть цей варіант.

### Критерії якості
- Ви запобігаєте або скасовуєте розгортання, якщо виявляєте порушення цілісності
- Перевірка виконується за підписами, створеними під час збирання
- Якщо перевірка підписів неможлива, Ви запроваджуєте компенсаційні заходи


## Потік Б - Управління секретними змінними

### Рівень зрілості 1

### Вигода
Визначений і обмежений доступ до ваших секретів виробництва

### Діяльність
Розробники не повинні мати доступу до секретів або облікових даних для середовищ виробницта. Майте механізм для належного захисту таємниць, наприклад (1) за допомогою конкретних осіб, які додають їх до відповідних файлів конфігурації під час розгортання (принцип розподілу обов’язків) або (2) шляхом шифрування виробничих секретів, що містяться у файлах конфігурації.

Не використовуйте виробничі секрети у файлах конфігурації для розробки чи тестування, оскільки такі середовища можуть мати значно нижчий рівень безпеки. Так само не зберігайте секрети незахищеними у файлах конфігурації в сховищах коду.

Зберігайте конфіденційні облікові дані та секрети для виробничих систем за допомогою шифрування завжди. Розгляньте можливість використання для цього спеціального інструменту. Відповідально користуйтеся ключами, лише персонал, відповідальний за виробництво розгортання має доступ до цих даних.

### Критерії якості
- Ви зберігаєте виробничі секрети в захищеному місці
- Розробники не мають доступу до секретів виробництва
- Секрети виробництва недоступні в невиробничих середовищах

## Рівень зрілості 2

### Вигода
Виявлення можливого витоку секретів виробництва

### Діяльність
Використовуйте автоматизований процес додавання облікових даних і секретів до конфігураційних файлів під час процесу розгортання до відповідних етапів. Таким чином, розробники і розгортачі не бачать і не обробляють ці конфіденційні значення.

Впровадьте перевірки, які виявляють наявність секретів у сховищах коду та періодично запускайте їх. Налаштуйте інструменти для пошуку відомих рядків і невідомих рядки з високою ентропією. У таких системах, як сховища коду, де
є історія, включайте версії в перевірки. Позначте потенційні секрети як конфіденційні значення та видаляєте їх, якщо потрібно. Якщо ви не можете видалити їх з файлу історії в сховищі коду, наприклад, Вам може бути потрібно оновити значення в системі, яка користується секретом. Таким чином, якщо зловмисник дізнається секрет, він не буде йому корисний.

Зробіть систему, яка використовується для зберігання та обробки секретів і облікових даних, надійною
з точки зору безпеки. Шифруйте всі секрети під час спокою та під час передачі. Користувачі, які налаштувати цю систему та секрети, які вона містить, підпорядковуються принципу найменших привілей. Наприклад, розробнику може знадобитися керувати секретами для середовища розробки, але не приймальним тестом або виробництвом навколишнього середовища.

### Критерії якості
- Файли вихідного коду не містять активних секретів програми
- За звичайних обставин ніхто не має доступу до секретів під час розгортання процедури
- Ви входите в обліковий запис і сповіщаєте про спробу незвичайного доступу до секретів

## Рівень зрілості 3

### Вигода
Зведена до мінімуму можливість і своєчасне виявлення зловживань виробничою таємницею

### Діяльність
Впровадьте управління життєвим циклом для секретів виробництва та забезпечте створення якомога більшої кількості нових секретів для кожного екземпляру застосування. Використання секретів для кожного екземпляра програми гарантує, що несподівану поведінку програми можна відстежити та належним чином проаналізувати. Інструменти можуть допомогти в автоматичному та непомітному оновленні секретів у всіх відповідних місцях при зміні.

Переконайтеся, що всі доступи до секретів (як для читання, так і для запису) зареєстровано в центральній інфраструктурі. Регулярно переглядайте ці журнали, щоб виявити несподівану поведінку та провести належний аналіз, щоб зрозуміти, чому це сталося. Вводіть проблеми та основні причини в практику управління дефектами, щоб переконатися, що організація вирішить будь-які неприйнятні ситуації.

### Критерії якості
- Ви створюєте та синхронізуєте секрети за допомогою перевіреного рішення
- Секрети різні для різних екземплярів програми
- Секрети регулярно оновлюються